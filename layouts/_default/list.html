{{ define "main" }}
<section class="content-section" lang="{{ .Language.Lang }}">
    <div class="bio">
        <p>{{- if .Params.bio -}}
            {{- .Params.bio | markdownify -}}
        {{- else if .Content -}}
            {{- .Content -}}
        {{- end -}}</p>
    </div>

    <nav class="links">
        {{ partial "links" (dict "lang" .Language.Lang "site" .Site) }}
    </nav>

    <div class="articles-section">
        <h2>{{ if eq .Language.Lang "ru" }}Статьи и выступления{{ else }}Articles & Talks{{ end }}</h2>
        <div class="articles">
            {{ $currentLang := .Language.Lang }}
            {{ $pages := where site.RegularPages "Section" "in" (slice "talks" "articles") }}
            {{ range $pages.ByDate.Reverse }}
            {{ if eq .Language.Lang $currentLang }}
            <a href="{{ .Permalink }}" class="article-card">
                <h3>{{ .Title }}</h3>
                <p>{{ .Description }}</p>
                <span class="article-source">
                    {{- if eq .Section "talks" -}}
                        {{- if eq $currentLang "ru" -}}Доклад{{- else -}}Talk{{- end -}}
                    {{- else -}}
                        {{- if eq $currentLang "ru" -}}Статья{{- else -}}Article{{- end -}}
                    {{- end -}}
                </span>
            </a>
            {{ end }}
            {{ end }}
            {{ partial "articles_static" (dict "lang" .Language.Lang) }}
        </div>
    </div>
</section>
{{ end }}
